{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\x\\\\Desktop\\\\Portfolio\\\\TSU\\\\front\\\\src\\\\Resources\\\\accountGuard.js\";\nimport React from \"react\";\nimport Account from './account';\nimport FirstPage from \"./starting\";\nimport { useState, useEffect } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass AccountGuard extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      authed: false,\n      loading: true\n    };\n  }\n  async componentDidMount() {\n    await this.isAuthed();\n  }\n  async isAuthed() {\n    const API_URL = 'http://localhost:3002/account';\n    try {\n      const response = await fetch(API_URL, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include'\n      });\n      if (response.ok) {\n        this.setState({\n          authed: true\n        });\n      }\n      this.setState({\n        loading: false\n      });\n    } catch (err) {\n      console.log(err);\n      alert(err.message);\n      this.setState({\n        loading: false\n      });\n    }\n  }\n  render() {\n    const {\n      authed,\n      loading\n    } = this.state;\n    const {\n      element: Component,\n      ...rest\n    } = this.props;\n    if (loading) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 16\n      }, this);\n    }\n    if (authed) {\n      return /*#__PURE__*/_jsxDEV(Route, {\n        ...rest,\n        element: /*#__PURE__*/_jsxDEV(Component, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 42\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 16\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(Navigate, {\n        to: \"/\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 16\n      }, this);\n    }\n  }\n}\nexport default AccountGuard;","map":{"version":3,"names":["React","Account","FirstPage","useState","useEffect","useSelector","jsxDEV","_jsxDEV","AccountGuard","Component","constructor","props","state","authed","loading","componentDidMount","isAuthed","API_URL","response","fetch","method","headers","credentials","ok","setState","err","console","log","alert","message","render","element","rest","children","fileName","_jsxFileName","lineNumber","columnNumber","Route","Navigate","to"],"sources":["C:/Users/x/Desktop/Portfolio/TSU/front/src/Resources/accountGuard.js"],"sourcesContent":["import React from \"react\";\r\nimport Account from './account'\r\nimport FirstPage from \"./starting\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\n  class AccountGuard extends Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = {\r\n        authed: false,\r\n        loading: true,\r\n      };\r\n    }\r\n  \r\n    async componentDidMount() {\r\n      await this.isAuthed();\r\n    }\r\n  \r\n    async isAuthed() {\r\n      const API_URL = 'http://localhost:3002/account';\r\n      try {\r\n        const response = await fetch(API_URL, {\r\n          method: 'GET',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n          credentials: 'include',\r\n        });\r\n  \r\n        if (response.ok) {\r\n          this.setState({ authed: true });\r\n        }\r\n  \r\n        this.setState({ loading: false });\r\n      } catch (err) {\r\n        console.log(err);\r\n        alert(err.message);\r\n        this.setState({ loading: false });\r\n      }\r\n    }\r\n  \r\n    render() {\r\n      const { authed, loading } = this.state;\r\n      const { element: Component, ...rest } = this.props;\r\n  \r\n      if (loading) {\r\n        return <div>Loading...</div>;\r\n      }\r\n  \r\n      if (authed) {\r\n        return <Route {...rest} element={<Component />} />;\r\n      } else {\r\n        return <Navigate to=\"/\" />;\r\n      }\r\n    }\r\n  }\r\n  \r\n  \r\nexport default AccountGuard;\r\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,OAAO,MAAM,WAAW;AAC/B,OAAOC,SAAS,MAAM,YAAY;AAClC,SAASC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,WAAW,QAAQ,aAAa;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAExC,MAAMC,YAAY,SAASC,SAAS,CAAC;EACnCC,WAAWA,CAACC,KAAK,EAAE;IACjB,KAAK,CAACA,KAAK,CAAC;IACZ,IAAI,CAACC,KAAK,GAAG;MACXC,MAAM,EAAE,KAAK;MACbC,OAAO,EAAE;IACX,CAAC;EACH;EAEA,MAAMC,iBAAiBA,CAAA,EAAG;IACxB,MAAM,IAAI,CAACC,QAAQ,CAAC,CAAC;EACvB;EAEA,MAAMA,QAAQA,CAAA,EAAG;IACf,MAAMC,OAAO,GAAG,+BAA+B;IAC/C,IAAI;MACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACF,OAAO,EAAE;QACpCG,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE;UACP,cAAc,EAAE;QAClB,CAAC;QACDC,WAAW,EAAE;MACf,CAAC,CAAC;MAEF,IAAIJ,QAAQ,CAACK,EAAE,EAAE;QACf,IAAI,CAACC,QAAQ,CAAC;UAAEX,MAAM,EAAE;QAAK,CAAC,CAAC;MACjC;MAEA,IAAI,CAACW,QAAQ,CAAC;QAAEV,OAAO,EAAE;MAAM,CAAC,CAAC;IACnC,CAAC,CAAC,OAAOW,GAAG,EAAE;MACZC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;MAChBG,KAAK,CAACH,GAAG,CAACI,OAAO,CAAC;MAClB,IAAI,CAACL,QAAQ,CAAC;QAAEV,OAAO,EAAE;MAAM,CAAC,CAAC;IACnC;EACF;EAEAgB,MAAMA,CAAA,EAAG;IACP,MAAM;MAAEjB,MAAM;MAAEC;IAAQ,CAAC,GAAG,IAAI,CAACF,KAAK;IACtC,MAAM;MAAEmB,OAAO,EAAEtB,SAAS;MAAE,GAAGuB;IAAK,CAAC,GAAG,IAAI,CAACrB,KAAK;IAElD,IAAIG,OAAO,EAAE;MACX,oBAAOP,OAAA;QAAA0B,QAAA,EAAK;MAAU;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC;IAC9B;IAEA,IAAIxB,MAAM,EAAE;MACV,oBAAON,OAAA,CAAC+B,KAAK;QAAA,GAAKN,IAAI;QAAED,OAAO,eAAExB,OAAA,CAACE,SAAS;UAAAyB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAE;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IACpD,CAAC,MAAM;MACL,oBAAO9B,OAAA,CAACgC,QAAQ;QAACC,EAAE,EAAC;MAAG;QAAAN,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAC5B;EACF;AACF;AAGF,eAAe7B,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}